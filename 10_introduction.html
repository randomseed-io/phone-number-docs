<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Introduction</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Phone-number</span> <span class="project-version">8.12.4-0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li><li class="depth-1 "><a href="40_development.html"><div class="inner"><span>Development</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>phone-number</span></div></div></li><li class="depth-2 branch"><a href="phone-number.calling-code.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>calling-code</span></div></a></li><li class="depth-2 branch"><a href="phone-number.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="phone-number.cost.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cost</span></div></a></li><li class="depth-2 branch"><a href="phone-number.country-code.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>country-code</span></div></a></li><li class="depth-2 branch"><a href="phone-number.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-2 branch"><a href="phone-number.match.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>match</span></div></a></li><li class="depth-2 branch"><a href="phone-number.net-code.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>net-code</span></div></a></li><li class="depth-2 branch"><a href="phone-number.region.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>region</span></div></a></li><li class="depth-2 branch"><a href="phone-number.spec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spec</span></div></a></li><li class="depth-2 branch"><a href="phone-number.type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type</span></div></a></li><li class="depth-2 branch"><a href="phone-number.tz-format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tz-format</span></div></a></li><li class="depth-2"><a href="phone-number.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#introduction" name="introduction"></a>Introduction</h1>
<p>The phone-number library is an interface to the Libphonenumber with some extra sugar. It allows to validate, inspect and generate phone numbers.</p>
<h2><a href="#installation" name="installation"></a>Installation</h2>
<p>To use phone-number in your project, add the following to dependencies section of <code>project.clj</code> or <code>build.boot</code>:</p>
<pre><code class="clojure">[io.randomseed/phone-number "8.12.4-0"]
</code></pre>
<p>For <code>deps.edn</code> add the following as an element of a map under <code>:deps</code> or <code>:extra-deps</code> key:</p>
<pre><code class="clojure">io.randomseed/phone-number {:mvn/version "8.12.4-0"}
</code></pre>
<p>Additionally you can use (in your development profile):</p>
<pre><code class="clojure">org.clojure/spec.alpha {:mvn/version "0.2.176"}
org.clojure/test.check {:mvn/version "0.10.0-alpha4"}
</code></pre>
<p>If you want to utilize specs and generators provided by the phone-number.</p>
<p>You can also download JAR from <a href="https://clojars.org/io.randomseed/phone-number">Clojars</a>.</p>
<h2><a href="#phone-number" name="phone-number"></a>Phone number</h2>
<p>A phone number is an abstract that can be a string, an integer number (with the accompanying region specification), a specially crafted map or a <code>PhoneNumber</code> object (which is the internal representation).</p>
<p>For regular operations (like validating a single number or searching for phone numbers in strings) it is enough to use data we already have (like a string or a map).</p>
<p>However, when the performance is important and there is a number of different operations to be executed on a single phone number it is advised to explicitly convert the number to its internal representation using the <a href="phone-number.core.html#var-number"><code>phone-number.core/number</code></a> function:</p>
<pre><code class="clojure">(require '[phone-number.core :as phone])

(let [n (phone/number "+44 29 2018 3133")]                         …)
(let [n (phone/number     "29 2018 3133" :phone-number.region/gb)] …)
(let [n (phone/number        2920183133  :phone-number.region/gb)] …)
</code></pre>
<h3><a href="#phone-number-as-an-argument" name="phone-number-as-an-argument"></a>Phone number as an argument</h3>
<p>Other forms of a phone number that are acceptable as arguments by most of the functions this library provides include:</p>
<ul>
  <li>strings (<code>"+44 29 2018 3133"</code>),</li>
  <li>natural numbers (<code>2920183133</code>),</li>
  <li>maps:
    <ul>
      <li>
      <p>
      </p><p>with <code>PhoneNumber</code> object: </p>
      <pre><code class="clojure">{:phone-number/number #&lt;Phonenumber$PhoneNumber@3edea9e6&gt;}
</code></pre><p></p></li>
      <li>
      <p>with region code and national number format: </p>
      <pre><code class="clojure">{:phone-number/region :gb
 :phone-number.format/national "2920183133"}
</code></pre></li>
      <li>
      <p>with calling code and national number format: </p>
      <pre><code class="clojure">{:phone-number/calling-code 44
 :phone-number.format/national "2920183133"}
</code></pre></li>
      <li>
      <p>with international number format: </p>
      <pre><code class="clojure">{:phone-number.format/international "+44 2920183133"}
</code></pre></li>
    </ul>
  </li>
</ul>
<p>Note that in case of natural numbers the additional region information is required (most of the functions will accept it as their second calling argument).</p>
<h3><a href="#namespace-inference" name="namespace-inference"></a>Namespace inference</h3>
<p>In the examples above some regions were set using namespace-qualified keywords and some were not. This is due to namespace inference when it comes to specifying phone number properties that are expressed as keywords.</p>
<p>When the dynamic variable <a href="phone-number.core.html#var-*inferred-namespaces*"><code>phone-number.core/*inferred-namespaces*</code></a> is set to <code>true</code> (which is the default setting) all functions that require keyword arguments will automatically enrich simple keywords to be namespace-qualified. That affects:</p>
<ul>
  <li>region codes (e.g. <code>:pl</code> becomes <code>phone-number.region/pl</code>),</li>
  <li>number types (e.g. <code>:mobile</code> becomes <code>phone-number.type/mobile</code>),</li>
  <li>number formats (e.g. <code>:international</code> becomes <code>phone-number.format/international</code>),</li>
  <li>time zone formats (e.g. <code>:short</code> becomes <code>:phone-number.tz-format/short</code>).</li>
</ul>
<h2><a href="#phone-number-properties" name="phone-number-properties"></a>Phone number properties</h2>
<p>To get the specific property of a phone number use one of the functions grouped in <a href="phone-number.core.html"><code>phone-number.core</code></a> namespace.</p>
<p>Additionally there is the <a href="phone-number.core.html#var-info"><code>info</code></a> function that produces a map with most of the properties that can be obtained.</p>
<pre><code class="clojure">(require '[phone-number.core :as phone])

(phone/info "+44 29 2018 3133")

{:phone-number/country-code               44,
 :phone-number/geographical?              true,
 :phone-number/location                   "Cardiff",
 :phone-number/possible?                  true,
 :phone-number/region                     :phone-number.region/gb,
 :phone-number/type                       :phone-number.type/fixed-line,
 :phone-number/valid?                     true,
 :phone-number.format/e164                "+442920183133",
 :phone-number.format/international       "+44 29 2018 3133",
 :phone-number.format/national            "029 2018 3133",
 :phone-number.format/raw-input           "+44 29 2018 3133",
 :phone-number.format/rfc3966             "tel:+44-29-2018-3133",
 :phone-number.tz-format/full-standalone  '("Greenwich Mean Time"),
 :phone-number.tz-format/id               '("Europe/London"),
 :phone-number.tz-format/short-standalone '("GMT"),
 :phone.number.short/possible?            false,
 :phone.number.short/valid?               false}
</code></pre>
<p>The <code>info</code> function (like most of the functions operating on phone numbers) takes an additional, second argument which should be a **region code**. It is used only when the given phone number was expressed in format that cannot provide such information (a string without calling code, a natural number, a map without any entry containing region or calling code).</p>
<pre><code class="clojure">(phone/info "0491 570 006" :au)

{:phone-number/calling-code               61,
 :phone-number/carrier                    "Telstra",
 :phone-number/geographical?              false,
 :phone-number/possible?                  true,
 :phone-number/region                     :phone-number.region/au,
 :phone-number/type                       :phone-number.type/mobile,
 :phone-number/valid?                     true,
 :phone-number.format/e164                "+61491570006",
 :phone-number.format/international       "+61 491 570 006",
 :phone-number.format/national            "0491 570 006",
 :phone-number.format/raw-input           "0491 570 006",
 :phone-number.format/rfc3966             "tel:+61-491-570-006",
 :phone-number.tz-format/full-standalone ("Central Australia Time"
                                          "Australian Central Western Time"
                                          "Lord Howe Time"
                                          "Western Australia Time"
                                          "Eastern Australia Time"
                                          "Christmas Island Time"
                                          "Cocos Islands Time"),
:phone-number.tz-format/id               ("Australia/Adelaide"
                                           "Australia/Eucla"
                                           "Australia/Lord_Howe"
                                           "Australia/Perth"
                                           "Australia/Sydney"
                                           "Indian/Christmas"
                                           "Indian/Cocos"),
 :phone-number.tz-format/short-standalone ("ACT"
                                           "ACWT"
                                           "LHT"
                                           "AWT"
                                           "AET"
                                           "CIT"
                                           "CCT"),
 :phone.number.short/possible?            false,
 :phone.number.short/valid?               false}
</code></pre>
<p>It is worth to note that time zone information is given in English (or the default locale for the system). That can be changed with a third, optional argument, which should be a <code>java.util.Locale</code> instance or a value that can be converted to it (string, keyword, symbol).</p>
<pre><code class="clojure">(phone/info "0491 570 006" :au :pl)

{:phone-number/calling-code               61,
 :phone-number/carrier                    "Telstra",
 :phone-number/geographical?              false,
 :phone-number/possible?                  true,
 :phone-number/region                     :phone-number.region/au,
 :phone-number/type                       :phone-number.type/mobile,
 :phone-number/valid?                     true,
 :phone-number.format/e164                "+61491570006",
 :phone-number.format/international       "+61 491 570 006",
 :phone-number.format/national            "0491 570 006",
 :phone-number.format/raw-input           "0491 570 006",
 :phone-number.format/rfc3966             "tel:+61-491-570-006",
 :phone-number.tz-format/full-standalone  ("Czas środkowoaustralijski"
                                           "Czas środkowo-zachodnioaustralijski"
                                           "Lord Howe"
                                           "Czas zachodnioaustralijski"
                                           "Czas wschodnioaustraliski"
                                           "Christmas Island Time"
                                           "Cocos Islands Time"),
 :phone-number.tz-format/id               ("Australia/Adelaide"
                                           "Australia/Eucla"
                                           "Australia/Lord_Howe"
                                           "Australia/Perth"
                                           "Australia/Sydney"
                                           "Indian/Christmas"
                                           "Indian/Cocos"),
 :phone-number.tz-format/short-standalone ("ACT"
                                           "ACWT"
                                           "LHT"
                                           "AWT"
                                           "AET"
                                           "CIT"
                                           "CCT"),
 :phone.number.short/possible?            false,
 :phone.number.short/valid?               false}
</code></pre>
<h3><a href="#phone-number-types" name="phone-number-types"></a>Phone number types</h3>
<pre><code class="clojure">(require '[phone-number.core :as phone])

phone/types

#{:phone-number.type/fixed-line
  :phone-number.type/fixed-line-or-mobile
  :phone-number.type/mobile
  :phone-number.type/pager
  :phone-number.type/personal
  :phone-number.type/premium-rate
  :phone-number.type/shared-cost
  :phone-number.type/toll-free
  :phone-number.type/uan
  :phone-number.type/unknown
  :phone-number.type/voicemail
  :phone-number.type/voip}
</code></pre>
<h3><a href="#region-codes" name="region-codes"></a>Region codes</h3>
<h3><a href="#calling-codes" name="calling-codes"></a>Calling codes</h3>
<h3><a href="#formats" name="formats"></a>Formats</h3>
<pre><code class="clojure">(require '[phone-number.core :as phone])

phone/formats

#{:phone-number.format/e164
  :phone-number.format/international
  :phone-number.format/national
  :phone-number.format/raw-input
  :phone-number.format/rfc3966}
</code></pre>
<h3><a href="#time-zone-formats" name="time-zone-formats"></a>Time zone formats</h3>
<p>…</p>
<h2><a href="#validation" name="validation"></a>Validation</h2>
<pre><code class="clojure">(require '[phone-number.core :as phone])

(phone/valid? 8081570001 :gb)      ; =&gt; true
(phone/valid? "+448081570001")     ; =&gt; true
(phone/valid? 8081570001 :pl)      ; =&gt; false
(phone/valid? "8081570001")        ; =&gt; false

(phone/possible? "8081570001")     ; =&gt; false
(phone/possible? "8081570001" :gb) ; =&gt; true
(phone/possible? "8081570001" :pl) ; =&gt; true
</code></pre>
<h2><a href="#samples-generation" name="samples-generation"></a>Samples generation</h2>
<pre><code class="clojure">(phone/generate)

{:phone-number/info {:phone-number/country-code         213,
                     :phone-number/geographical?        false,
                     :phone-number/possible?            true,
                     :phone-number/region               :phone-number.region/dz,
                     :phone-number/type                 :phone-number.type/unknown,
                     :phone-number/valid?               false,
                     :phone-number.format/e164          "+213181525997",
                     :phone-number.format/international "+213 181525997",
                     :phone-number.format/national      "181525997",
                     :phone-number.format/rfc3966       "tel:+213-181525997",
                     :phone.number.short/possible?      false,
                     :phone.number.short/valid?         false},
 :phone-number/number #&lt;com.google.i18n.phonenumbers.Phonenumber$PhoneNumber@3edea9e6&gt;,
 :phone-number.sample/digits      ["+213" nil "181525997"],
 :phone-number.sample/hits        10,
 :phone-number.sample/max-samples 1000,
 :phone-number.sample/random-seed 7521527664400716800,
 :phone-number.sample/samples     11}

(require [phone-number.spec       :as spec]
         [clojure.spec.alpha      :as    s]
         [clojure.spec.gen.alpha  :as  gen])

(gen/generate (s/gen :phone-number/valid))

{:phone-number/info   #delay[{:status :pending, :val nil} 0x3810d15d],
 :phone-number/number #&lt;com.google.i18n.phonenumbers.Phonenumber$PhoneNumber@79cc08fb&gt;,
 :phone-number.sample/digits      ["+7" nil "937627908"],
 :phone-number.sample/hits        11,
 :phone-number.sample/max-samples 150,
 :phone-number.sample/random-seed 7581363778716192180,
 :phone-number.sample/samples     27}

(gen/generate (s/gen (s/and :phone-number/possible :phone-number/invalid)))

{:phone-number/info    #delay[{:status :pending, :val nil} 0x41c0e225],
 :phone-number/number #&lt;com.google.i18n.phonenumbers.Phonenumber$PhoneNumber@36a74c18&gt;,
 :phone-number.sample/digits      ["+84" nil "0270454"],
 :phone-number.sample/hits        8,
 :phone-number.sample/max-samples 200,
 :phone-number.sample/random-seed -9105741821593959780,
 :phone-number.sample/samples     12}
</code></pre>
<h2><a href="#documentation" name="documentation"></a>Documentation</h2>
<p>Full documentation including usage examples is available at:</p>
<ul>
  <li><a href="https://randomseed.io/software/phone-number/">https://randomseed.io/software/phone-number/</a></li>
</ul>
<h2><a href="#license" name="license"></a>License</h2>
<p>Copyright © 2020 Paweł Wilk</p>
<p>Phone-number is copyrighted software owned by Paweł Wilk (<a href="mailto:pw@gnu.org)">pw@gnu.org)</a>. You may redistribute and/or modify this software as long as you comply with the terms of the <a href="https://github.com/randomseed-io/phone-number/blob/master/LICENSE">GNU Lesser General Public License</a> (version 3).</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></div></div></div></body></html>